let static(path) = do
    let middleware(req, res) = do
        let pathsToTry = [path+req.path, path+req.path+"/index.html"]
        for (i from 0 to pathsToTry.length) do
            try do
                res.sendFile(pathsToTry[i])
                return
            catch (_) do
                continue
        if (req.isClosed()) return
        res.next()
    return middleware